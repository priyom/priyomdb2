<?xml version="1.0"?>
<td xmlns="http://www.w3.org/1999/xhtml"
    xmlns:exec="https://xmlns.zombofant.net/xsltea/exec"
    xmlns:tea="https://xmlns.zombofant.net/xsltea/processors"
    xmlns:form="https://xmlns.zombofant.net/xsltea/form">
  <div class="ym-fbox">
    <div class="ym-fbox-wrap ym-grid linearize-level-3">
      <div class="ym-gl ym-g33"><div class="ym-gbox">
        <div class="ym-fbox">
          <label form:for-field="duplicity">Duplicity</label>
          <select form:field="duplicity">
            <tea:for-each tea:bind="value, name"
                          tea:from="(
                                    ('1', 'one'),
                                    ('+', 'one or more'),
                                    ('*', 'zero or more'),
                                    ('{}', 'custom, fixed amount'),
                                    )">
              <option exec:value="value"
                      exec:selected="'' if node.duplicity == value else None"><exec:text>name</exec:text></option>
            </tea:for-each>
          </select>
        </div>
        <div class="ym-fbox">
          <label form:for-field="count"
                 tooltip="This is unused if duplicity is anything but a custom, fixed amount.">Count</label>
          <input type="number"
                 form:field="count"/>
        </div>
      </div></div>
      <div class="ym-gl ym-g33"><div class="ym-gbox">
        <div class="ym-fbox">
          <span class="ym-label">Flags</span>
          <div class="ym-fbox-wrap">
            <div class="ym-fbox-check">
              <input type="checkbox"
                     form:field="saved" />
              <label form:for-field="saved">Save contents to db</label>
            </div>
            <div class="ym-fbox-check">
              <input type="checkbox"
                     form:field="join" />
              <label form:for-field="join">Join children</label>
            </div>
          </div>
        </div>
        <div class="ym-fbox">
          <label form:for-field="content_match">Join / Match expression</label>
          <input type="text"
                 form:field="content_match" />
        </div>
      </div></div>
      <div class="ym-gl ym-g33"><div class="ym-gbox">
        <div class="ym-fbox">
          <input type="submit"
                 class="ym-button ym-success"
                 form:action="add_child"
                 value="Add child" />
        </div>
        <exec:if condition="level > 0">
          <div class="ym-fbox">
            <input type="submit"
                   class="ym-button"
                   form:action="move_up"
                   value="Move up"
                   style="width: 47%; margin-right: 6%;" />
            <input type="submit"
                   class="ym-button"
                   form:action="move_down"
                   value="Move down"
                   style="width: 47%; margin-right: 0;" />
          </div>
          <div class="ym-fbox">
            <input type="submit"
                   class="ym-button ym-danger"
                   form:action="delete"
                   value="Delete" />
          </div>
        </exec:if>
      </div></div>
    </div>
  </div>
</td>
